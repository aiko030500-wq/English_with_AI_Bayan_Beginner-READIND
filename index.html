<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ENGLISH WITH AI BAYAN ‚Äì Beginner READING</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      --blue-main:#6d3b0f;   /* —Ç—ë–º–Ω–æ-–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π */
      --blue-soft:#a5621c;   /* —Ç—ë–ø–ª—ã–π –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π */
      --gold:#ffd54f;
      --bg:#f4f3ef;
      --topicColor:#6d3b0f;
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }

    body{
      background:var(--bg);
      color:#3b2b20;
    }

    /* HEADER */
    header{
      background:linear-gradient(90deg,#6d3b0f,#a5621c);
      color:#fff;
      padding:10px 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 2px 6px rgba(0,0,0,.2);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .logo-img{
      width:50px;
      height:50px;
      border-radius:50%;
      object-fit:cover;
      border:3px solid var(--gold);
      background:white;
    }

    .brand-text h1{
      font-size:18px;
      letter-spacing:.04em;
    }

    .brand-text span{
      font-size:12px;
      opacity:.9;
    }

    .top-info{
      font-size:13px;
      text-align:right;
    }
    .top-info strong{color:var(--gold);}

    main{
      padding:16px;
      max-width:1300px;
      margin:0 auto;
    }

    .card{
      background:#fff;
      border-radius:14px;
      box-shadow:0 4px 14px rgba(0,0,0,.08);
      padding:20px;
    }

    .hidden{display:none !important;}

    .section-title{
      font-size:18px;
      margin-bottom:10px;
      font-weight:600;
    }
    .muted{
      color:#7a6a5c;
      font-size:12px;
    }

    .field-label{
      font-size:14px;
      margin-bottom:4px;
    }

    .text-input{
      width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #d6c8bc;
      margin-bottom:14px;
      font-size:14px;
    }
    .text-input:focus{
      outline:none;
      border-color:var(--blue-soft);
      box-shadow:0 0 0 2px rgba(165,98,28,.2);
    }

    .btn{
      border:none;
      border-radius:10px;
      padding:10px 18px;
      font-size:14px;
      font-weight:600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
    }
    .btn-primary{
      background:var(--blue-soft);
      color:#fff;
    }
    .btn-primary:hover{background:#8d4f17;}
    .btn-ghost{
      background:#f3e6da;
      color:#5b3311;
    }
    .btn-ghost:hover{background:#e7d6c7;}

    .error{
      margin-top:10px;
      color:#b00020;
      font-size:13px;
    }

    /* SCREENS */
    #loginScreen{
      max-width:520px;
      margin:40px auto;
    }

    #mainMenuScreen{
      display:grid;
      grid-template-columns:2fr 1.2fr;
      gap:16px;
    }
    @media(max-width:960px){
      #mainMenuScreen{
        grid-template-columns:1fr;
      }
    }

    .tag{
      display:inline-block;
      padding:2px 6px;
      border-radius:999px;
      background:#ffe8c2;
      font-size:11px;
      color:#5b3311;
    }

    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:12px;
    }

    .stars-badge{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:4px 8px;
      border-radius:999px;
      background:#fff9e5;
      border:1px solid #ffe082;
      font-size:12px;
    }
    .star-icon{color:#ffb300;}

    .topics-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:8px;
    }
    @media(max-width:700px){
      .topics-grid{grid-template-columns:1fr;}
    }

    .topic-card{
      border-radius:12px;
      border:1px solid #e0d4c6;
      padding:10px 12px;
      background:#f9f6f2;
      cursor:pointer;
      transition:.15s;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .topic-card:hover{
      background:#f3e6da;
      transform:translateY(-1px);
    }
    .topic-card-title{
      font-size:14px;
      font-weight:600;
    }
    .topic-card-sub{
      font-size:11px;
      color:#7a6a5c;
    }

    /* AI PANEL (demo) */
    #aiPanel{
      background:#fff;
      border-radius:14px;
      padding:14px;
      box-shadow:0 2px 10px rgba(0,0,0,.06);
      display:flex;
      flex-direction:column;
      gap:8px;
      min-height:260px;
    }
    #aiPanel h3{
      font-size:15px;
      margin-bottom:4px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
    }
    #aiLimit{
      font-size:11px;
    }
    .chat-note{
      font-size:11px;
      color:#7a6a5c;
    }
    .chat-box{
      flex:1;
      border-radius:10px;
      border:1px solid #e0d4c6;
      padding:8px;
      background:#f9f6f2;
      font-size:13px;
      overflow-y:auto;
    }
    .chat-msg{
      margin-bottom:6px;
      line-height:1.4;
    }
    #aiQuestion{
      width:100%;
      min-height:60px;
      resize:vertical;
      border-radius:10px;
      border:1px solid #d6c8bc;
      padding:8px;
      font-size:13px;
      margin-top:4px;
    }

    /* TOPIC SCREEN */
    #topicScreen{
      max-width:1000px;
      margin:0 auto;
    }
    .topic-header{
      border-radius:16px 16px 0 0;
      padding:14px 16px;
      background:linear-gradient(90deg,var(--topicColor),#a5621c);
      color:#fff;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .topic-header-main{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .topic-header-title{
      font-size:18px;
      font-weight:600;
    }
    .topic-header-tag{
      font-size:11px;
      opacity:.9;
    }
    .topic-header-buttons{
      display:flex;
      gap:6px;
      flex-wrap:wrap;
    }
    .btn-topic{
      border:none;
      border-radius:999px;
      padding:6px 12px;
      font-size:12px;
      cursor:pointer;
      font-weight:600;
    }
    .btn-topic.back{
      background:#ffffff;
      color:var(--topicColor);
    }
    .btn-topic.menu{
      background:rgba(255,255,255,.15);
      color:#fff;
      border:1px solid rgba(255,255,255,.5);
    }

    .topic-body{
      background:#fff;
      border-radius:0 0 16px 16px;
      box-shadow:0 4px 14px rgba(0,0,0,.08);
      padding:16px;
    }

    .reading-box{
      background:#fdf7f0;
      border-left:4px solid var(--topicColor);
      padding:10px 12px;
      border-radius:10px;
      margin-bottom:12px;
      font-size:14px;
      line-height:1.5;
    }
    .reading-box p{margin-top:6px;}
    .reading-vocab{
      margin-top:8px;
      font-size:13px;
      color:#4b382a;
    }

    .examples{
      margin-top:8px;
      font-size:13px;
    }
    .examples li{
      margin-left:18px;
      margin-bottom:2px;
    }

    .exercises{
      margin-top:12px;
    }
    .exercise-block{
      border-radius:12px;
      background:#f9f6f2;
      padding:10px 12px;
      margin-bottom:10px;
      border:1px solid #e0d4c6;
    }
    .exercise-title{
      font-size:14px;
      font-weight:600;
      margin-bottom:4px;
    }
    .exercise-desc{
      font-size:12px;
      color:#7a6a5c;
      margin-bottom:6px;
    }
    .question-row{
      font-size:13px;
      margin-bottom:6px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:6px;
    }
    .question-text{
      flex:1 1 160px;
    }
    .options{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
    }
    .options label{
      background:#ffffff;
      border-radius:999px;
      border:1px solid #e0d4c6;
      padding:2px 8px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:3px;
    }
    .options input[type="radio"]{
      accent-color:var(--topicColor);
    }
    .mark{
      width:18px;
      text-align:center;
      font-size:16px;
      font-weight:700;
    }
    .mark.correct{color:#2e7d32;}
    .mark.wrong{color:#c62828;}
    .exercise-footer{
      margin-top:6px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .exercise-footer small{
      font-size:11px;
      color:#7a6a5c;
    }

    /* TEACHER */
    #teacherScreen{
      margin-top:20px;
    }
    .top-buttons{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .table-wrapper{
      overflow-x:auto;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
      margin-top:10px;
    }
    th,td{
      border:1px solid #e0d4c6;
      padding:6px 8px;
      text-align:left;
      white-space:nowrap;
    }
    th{
      background:#f3e6da;
      font-weight:600;
    }

    /* PRINT: only topic */
    @media print{
      header, #loginScreen, #mainMenuScreen, #teacherScreen{
        display:none !important;
      }
      body{
        background:#fff;
      }
      #topicScreen{
        display:block !important;
        margin:0;
        padding:0;
      }
      .topic-body{
        box-shadow:none;
        border-radius:0;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="brand">
    <img src="logo.png" alt="AI Bayan" class="logo-img">
    <div class="brand-text">
      <h1>ENGLISH WITH AI BAYAN</h1>
      <span>Beginner ¬∑ stars ¬∑ reading texts</span>
    </div>
  </div>
  <div class="top-info" id="topInfo">Not logged in</div>
</header>

<main>
  <!-- LOGIN -->
  <section id="loginScreen" class="card">
    <h2 class="section-title">Login</h2>
    <p class="muted" style="margin-bottom:10px">
      Enter your <strong>Name</strong> and <strong>Code</strong>. Ask your teacher for the code.
    </p>

    <label class="field-label" for="loginName">Name</label>
    <input id="loginName" class="text-input" type="text" placeholder="Your name" />

    <label class="field-label" for="loginCode">Code</label>
    <input id="loginCode" class="text-input" type="password" placeholder="Student or teacher code" />

    <div style="display:flex;gap:8px;margin-top:4px">
      <button class="btn btn-primary" onclick="handleLogin()">Login</button>
      <button class="btn btn-ghost" onclick="backToLogin()">Reset</button>
    </div>

    <div id="loginError" class="error hidden"></div>
  </section>

  <!-- MAIN MENU (STUDENT) -->
  <section id="mainMenuScreen" class="hidden">
    <section class="card">
      <div class="top-row">
        <div>
          <h2 class="section-title" style="margin-bottom:4px;">Beginner topics ‚Äì Reading</h2>
          <div id="menuInfo" class="muted"></div>
        </div>
        <div>
          <span class="stars-badge">
            <span class="star-icon">‚≠ê</span>
            Stars: <span id="menuStars">0</span>
          </span>
        </div>
      </div>

      <div class="topics-grid" id="menuTopics"></div>
    </section>

    <aside id="aiPanel">
      <div>
        <h3>
          AI Bayan
          <span id="aiLimit">¬∑ demo mode</span>
        </h3>
        <p class="chat-note">
          In the future AI Bayan will help with reading texts and vocabulary.
        </p>
      </div>

      <div id="chatBox" class="chat-box">
        <div class="chat-msg">
          AI chat is not active in this demo. Now use reading texts and exercises.
        </div>
      </div>

      <div>
        <textarea id="aiQuestion"
                  placeholder="AI chat will be available soon."
                  disabled></textarea>
        <div class="chat-actions">
          <button class="btn btn-primary" id="askBtn" disabled>Ask (soon)</button>
        </div>
        <p class="chat-note">
          Later your questions and answers will be visible for the teacher.
        </p>
      </div>
    </aside>
  </section>

  <!-- TOPIC SCREEN -->
  <section id="topicScreen" class="hidden">
    <div class="topic-header">
      <div class="topic-header-main">
        <div class="topic-header-title" id="topicHeaderTitle">Topic</div>
        <div class="topic-header-tag" id="topicHeaderTag"></div>
      </div>
      <div class="topic-header-buttons">
        <button class="btn-topic back" onclick="backToMenu()">‚Üê Back</button>
        <button class="btn-topic menu" onclick="backToMenu()">üè† Main menu</button>
        <button class="btn-topic menu" onclick="printCurrentTopic()">üñ® Print</button>
      </div>
    </div>
    <div class="topic-body">
      <div id="topicRuleContainer"></div>
      <div id="topicExercisesContainer"></div>
      <div id="topicStatus" class="muted" style="margin-top:8px;"></div>
    </div>
  </section>

  <!-- TEACHER -->
  <section id="teacherScreen" class="hidden card">
    <div class="top-buttons">
      <button class="btn btn-ghost" onclick="backToLogin()">‚Üê Back to login</button>
      <span class="tag">Teacher mode</span>
    </div>
    <h2 class="section-title">Teacher dashboard</h2>
    <p class="muted">
      Shows data saved in this browser: stars and last login (per code).
    </p>

    <div class="table-wrapper">
      <table id="teacherTable">
        <thead>
        <tr>
          <th>Class</th>
          <th>Code</th>
          <th>Name</th>
          <th>Stars</th>
          <th>Last login</th>
        </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>
</main>

<script>
/* ---------- CLASS RANGES (PIN) ---------- */

const classRanges = [
  { cls: "3E",  from: 101,  to: 115 },
  { cls: "4G",  from: 201,  to: 215 },
  { cls: "5G",  from: 301,  to: 315 },
  { cls: "5Zh", from: 401,  to: 415 },
  { cls: "6G",  from: 501,  to: 515 },
  { cls: "7B",  from: 601,  to: 615 },
  { cls: "7V",  from: 701,  to: 715 },
  { cls: "8E",  from: 801,  to: 815 },
  { cls: "9Zh", from: 901,  to: 915 },
  { cls: "10A", from: 1001, to: 1015 }
];

function getClassByCode(num){
  for (const r of classRanges){
    if (num >= r.from && num <= r.to){
      return r.cls;
    }
  }
  return null;
}

/* ---------- TOPIC COLORS ---------- */
const topicColors = {
  1:"#a5621c",
  2:"#8b4513",
  3:"#bd6325",
  4:"#b76e3a",
  5:"#7b4b23",
  6:"#c47a34"
};

/* ---------- READING TOPICS (6) ---------- */
const topics = [
  {
    id:1,
    name:"About Me",
    level:"Beginner",
    title:"All About Me",
    readingText:"My name is Aigerim and I am eleven years old. I live in a flat in the city with my parents and my little brother. On weekdays I go to school and do my homework in the afternoon. In my free time I like reading stories, listening to music and chatting with my friends. I am friendly and usually in a good mood, but I can be shy with new people.",
    vocab:"flat ‚Äì –∫–≤–∞—Ä—Ç–∏—Ä–∞; shy ‚Äì —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–π; in a good mood ‚Äì –≤ —Ö–æ—Ä–æ—à–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏.",
    examples:[
      "I am eleven years old.",
      "I live in a flat with my family.",
      "I can be shy with new people."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Read the sentences and choose True (T) or False (F).",
        questions:[
          {
            text:"Aigerim lives alone in a big house.",
            options:["True","False"],
            correct:1
          },
          {
            text:"She has a little brother.",
            options:["True","False"],
            correct:0
          },
          {
            text:"She is always very confident with new people.",
            options:["True","False"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice ‚Äì details",
        desc:"Choose the correct answer (A, B or C).",
        questions:[
          {
            text:"Where does Aigerim live?",
            options:["In a village house.","In a flat in the city.","In a school dormitory."],
            correct:1
          },
          {
            text:"When does she do her homework?",
            options:["In the morning before school.","In the afternoon.","Late at night."],
            correct:1
          },
          {
            text:"What does she like doing in her free time?",
            options:["Reading, listening to music and chatting.","Only sleeping.","Only doing sports."],
            correct:0
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary ‚Äì choose the best word",
        desc:"Choose the correct word from the text.",
        questions:[
          {
            text:"The word for 'apartment' in the text is‚Ä¶",
            options:["flat","mood","desk"],
            correct:0
          },
          {
            text:"If you are 'shy', you‚Ä¶",
            options:["talk to everybody easily.","are quiet with new people.","always shout."],
            correct:1
          },
          {
            text:"'In a good mood' means‚Ä¶",
            options:["in a bad mood.","angry.","happy and positive."],
            correct:2
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose the best title for the text.",
        questions:[
          {
            text:"The main idea of the text is‚Ä¶",
            options:[
              "Aigerim‚Äôs school timetable.",
              "Aigerim‚Äôs daily routine at work.",
              "A short description of Aigerim and her life."
            ],
            correct:2
          }
        ]
      }
    ]
  },
  {
    id:2,
    name:"My Family",
    level:"Beginner",
    title:"My Friendly Family",
    readingText:"I have a small but friendly family. There are four people in my family: my mum, my dad, my younger brother and me. My mum is a doctor, she is very kind and patient. My dad works as an engineer and likes fixing things at home. My brother is eight, he is noisy but funny. In the evenings we often have dinner together and talk about our day.",
    vocab:"engineer ‚Äì –∏–Ω–∂–µ–Ω–µ—Ä; patient ‚Äì —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–π; noisy ‚Äì —à—É–º–Ω—ã–π.",
    examples:[
      "There are four people in my family.",
      "My mum is kind and patient.",
      "We have dinner together in the evenings."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T or F.",
        questions:[
          {
            text:"There are five people in the family.",
            options:["True","False"],
            correct:1
          },
          {
            text:"The mum is a doctor.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The brother is quiet and never noisy.",
            options:["True","False"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice ‚Äì details",
        desc:"Answer the questions.",
        questions:[
          {
            text:"What is the father‚Äôs job?",
            options:["Teacher.","Engineer.","Driver."],
            correct:1
          },
          {
            text:"How old is the brother?",
            options:["Eight.","Ten.","Twelve."],
            correct:0
          },
          {
            text:"What do they often do in the evenings?",
            options:["Watch TV separately.","Have dinner together and talk.","Go to different houses."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the correct explanation.",
        questions:[
          {
            text:"A person who helps in a hospital is a‚Ä¶",
            options:["doctor","engineer","driver"],
            correct:0
          },
          {
            text:"If a person is 'patient', they‚Ä¶",
            options:["get angry quickly.","can wait and stay calm.","never listen."],
            correct:1
          },
          {
            text:"If a child is 'noisy', they‚Ä¶",
            options:["make a lot of sound.","sleep all day.","never speak."],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose the best title.",
        questions:[
          {
            text:"The text is mostly about‚Ä¶",
            options:[
              "a school party.",
              "a small but friendly family.",
              "a trip to the city."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:3,
    name:"Friends",
    level:"Beginner",
    title:"My Best Friend",
    readingText:"My best friend‚Äôs name is Timur. We study in the same class, so we see each other every day. Timur is tall and slim, he has short dark hair and brown eyes. He is very helpful and always shares his things. After school we often play football or go for a walk in the park. When I have a problem, Timur listens and tries to help me.",
    vocab:"slim ‚Äì —Å—Ç—Ä–æ–π–Ω—ã–π; helpful ‚Äì –≥–æ—Ç–æ–≤—ã–π –ø–æ–º–æ—á—å; share ‚Äì –¥–µ–ª–∏—Ç—å—Å—è.",
    examples:[
      "Timur is in the same class.",
      "We often play football together.",
      "He listens when I have a problem."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T or F.",
        questions:[
          {
            text:"Timur is the writer‚Äôs cousin.",
            options:["True","False"],
            correct:1
          },
          {
            text:"They study in the same class.",
            options:["True","False"],
            correct:0
          },
          {
            text:"Timur never shares his things.",
            options:["True","False"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Choose the correct answer.",
        questions:[
          {
            text:"What does Timur look like?",
            options:[
              "Short and strong.",
              "Tall and slim with short dark hair.",
              "Very small with long hair."
            ],
            correct:1
          },
          {
            text:"What do they often do after school?",
            options:[
              "Play football or walk in the park.",
              "Go to work.",
              "Cook dinner at school."
            ],
            correct:0
          },
          {
            text:"What does Timur do when the writer has a problem?",
            options:[
              "He laughs.",
              "He ignores it.",
              "He listens and tries to help."
            ],
            correct:2
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the correct word from the text.",
        questions:[
          {
            text:"If a friend is 'helpful', they‚Ä¶",
            options:["never help.","often help other people.","always shout."],
            correct:1
          },
          {
            text:"If you 'share' your things, you‚Ä¶",
            options:[
              "keep everything only for yourself.",
              "give or lend them to other people.",
              "throw them away."
            ],
            correct:1
          },
          {
            text:"'Slim' is close in meaning to‚Ä¶",
            options:["thin","tall","heavy"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose the best sentence.",
        questions:[
          {
            text:"The main idea of the text is‚Ä¶",
            options:[
              "a description of a good friend.",
              "a story about a school test.",
              "rules of a football game."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:4,
    name:"Hobbies",
    level:"Beginner",
    title:"My Hobbies",
    readingText:"I have several hobbies. My favourite one is drawing. I like using bright colours and drawing animals and people. At the weekend I sometimes take my sketchbook to the park and draw trees or buildings. I also enjoy playing the guitar in the evening. Hobbies help me relax after school and forget about difficult tests.",
    vocab:"sketchbook ‚Äì –∞–ª—å–±–æ–º –¥–ª—è —Ä–∏—Å—É–Ω–∫–æ–≤; building ‚Äì –∑–¥–∞–Ω–∏–µ; several ‚Äì –Ω–µ—Å–∫–æ–ª—å–∫–æ.",
    examples:[
      "My favourite hobby is drawing.",
      "I sometimes draw in the park.",
      "I play the guitar in the evening."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"The writer‚Äôs favourite hobby is dancing.",
            options:["True","False"],
            correct:1
          },
          {
            text:"He sometimes draws outside in the park.",
            options:["True","False"],
            correct:0
          },
          {
            text:"Hobbies help him relax after school.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer the questions.",
        questions:[
          {
            text:"What does he like drawing?",
            options:[
              "Only cars.",
              "Animals and people.",
              "Only numbers."
            ],
            correct:1
          },
          {
            text:"What musical instrument does he play?",
            options:["The piano.","The guitar.","The violin."],
            correct:1
          },
          {
            text:"When does he usually play the guitar?",
            options:["In the morning.","In the evening.","At school."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the correct word.",
        questions:[
          {
            text:"An album where you draw is called‚Ä¶",
            options:["textbook","sketchbook","notebook"],
            correct:1
          },
          {
            text:"If colours are 'bright', they are‚Ä¶",
            options:["very light and strong.","dark and dirty.","invisible."],
            correct:0
          },
          {
            text:"Hobbies help him forget about‚Ä¶",
            options:["friends.","difficult tests.","music."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose the main idea.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "different school subjects.",
              "the writer‚Äôs hobbies and why he likes them.",
              "rules in the park."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:5,
    name:"Food",
    level:"Beginner",
    title:"Food and Drinks",
    readingText:"I try to eat healthy food most of the time. For breakfast I usually have porridge or eggs and a cup of tea. At school I eat an apple or a sandwich during the break. For lunch we often have soup and salad at home. I like sweets and fast food too, but I don‚Äôt eat them every day. I know that vegetables, fruit and water are good for my body.",
    vocab:"porridge ‚Äì –∫–∞—à–∞; break ‚Äì –ø–µ—Ä–µ–º–µ–Ω–∞; body ‚Äì –æ—Ä–≥–∞–Ω–∏–∑–º.",
    examples:[
      "I usually have porridge or eggs for breakfast.",
      "At school I eat an apple or a sandwich.",
      "Vegetables and fruit are good for my body."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"The writer always eats fast food for breakfast.",
            options:["True","False"],
            correct:1
          },
          {
            text:"He sometimes eats an apple at school.",
            options:["True","False"],
            correct:0
          },
          {
            text:"He knows that vegetables are healthy.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer the questions.",
        questions:[
          {
            text:"What does he usually have for breakfast?",
            options:[
              "Porridge or eggs and tea.",
              "Only chocolate.",
              "Nothing."
            ],
            correct:0
          },
          {
            text:"What does he often eat for lunch?",
            options:[
              "Soup and salad.",
              "Only ice cream.",
              "Only bread."
            ],
            correct:0
          },
          {
            text:"How often does he eat sweets and fast food?",
            options:[
              "Every day.",
              "Sometimes, but not every day.",
              "Never."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the correct word from the text.",
        questions:[
          {
            text:"The Russian word for 'porridge' is‚Ä¶",
            options:["–∫–∞—à–∞","—Å—É–ø","—è–π—Ü–æ"],
            correct:0
          },
          {
            text:"A short rest between lessons is a‚Ä¶",
            options:["break","dinner","holiday"],
            correct:0
          },
          {
            text:"Good food and water are good for your‚Ä¶",
            options:["phone","body","bedroom"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is mainly about‚Ä¶",
            options:[
              "an unhealthy lifestyle.",
              "eating healthy food most of the time.",
              "history of fast food."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:6,
    name:"School Day",
    level:"Beginner",
    title:"My School Day",
    readingText:"On weekdays I get up at seven o‚Äôclock. I wash my face, get dressed and have a quick breakfast. Then I go to school on foot because it is near my house. Our lessons start at eight. We usually have Maths, Kazakh, Russian, English and PE. After school I come home, have lunch and do my homework. In the evening I can relax, watch a little TV or read a book.",
    vocab:"on foot ‚Äì –ø–µ—à–∫–æ–º; near ‚Äì —Ä—è–¥–æ–º; lesson ‚Äì —É—Ä–æ–∫.",
    examples:[
      "I go to school on foot.",
      "Our lessons start at eight.",
      "In the evening I can relax."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"The writer gets up at nine o‚Äôclock.",
            options:["True","False"],
            correct:1
          },
          {
            text:"School is near the house.",
            options:["True","False"],
            correct:0
          },
          {
            text:"He always goes to school by bus.",
            options:["True","False"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer the questions.",
        questions:[
          {
            text:"How does he go to school?",
            options:["By car.","On foot.","By train."],
            correct:1
          },
          {
            text:"What lessons does he usually have?",
            options:[
              "Maths, languages and PE.",
              "Only Music and Art.",
              "No lessons."
            ],
            correct:0
          },
          {
            text:"What does he do after school?",
            options:[
              "Has lunch and does homework.",
              "Goes straight to bed.",
              "Plays games all day."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the correct meaning.",
        questions:[
          {
            text:"If you go 'on foot', you‚Ä¶",
            options:["go by car.","walk.","fly."],
            correct:1
          },
          {
            text:"If something is 'near', it is‚Ä¶",
            options:["far away.","very expensive.","close to you."],
            correct:2
          },
          {
            text:"A 'lesson' is‚Ä¶",
            options:[
              "a school class.",
              "a type of food.",
              "a football match."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "a weekend trip.",
              "a usual school day.",
              "an exam at university."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:7,
    name:"Sports",
    level:"Beginner",
    title:"Sport in My Life",
    readingText:"I like doing sports. My favourite sport is football. I play with my friends after school on the football field. At the weekend I sometimes go swimming with my cousin. Sport helps me stay healthy and strong.",
    vocab:"field ‚Äì –ø–æ–ª–µ; strong ‚Äì —Å–∏–ª—å–Ω—ã–π; stay healthy ‚Äì –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∑–¥–æ—Ä–æ–≤—ã–º.",
    examples:[
      "I play football after school.",
      "Sport helps me stay healthy.",
      "I sometimes go swimming at the weekend."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Are the sentences true (T) or false (F)?",
        questions:[
          {
            text:"Football is the writer‚Äôs favourite sport.",
            options:["True","False"],
            correct:0
          },
          {
            text:"He plays football with his teacher.",
            options:["True","False"],
            correct:1
          },
          {
            text:"Sport helps him stay healthy.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Choose the correct answer.",
        questions:[
          {
            text:"When does he usually play football?",
            options:["After school.","In the morning at five.","Only at night."],
            correct:0
          },
          {
            text:"Who goes swimming with him?",
            options:["His cousin.","His mum.","His neighbour."],
            correct:0
          },
          {
            text:"Where do they play football?",
            options:["In the classroom.","On the football field.","In the kitchen."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the correct meaning.",
        questions:[
          {
            text:"A 'field' is‚Ä¶",
            options:["a room","an open place outside","a book"],
            correct:1
          },
          {
            text:"If you are 'strong', you‚Ä¶",
            options:["are very weak.","cannot run.","have good muscles and energy."],
            correct:2
          },
          {
            text:"'Stay healthy' means‚Ä¶",
            options:["be ill all the time.","remain well and feel good.","sleep at school."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose the best title.",
        questions:[
          {
            text:"The text is mostly about‚Ä¶",
            options:[
              "a football match on TV.",
              "why the writer likes sport.",
              "shopping in the city."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:8,
    name:"Weather",
    level:"Beginner",
    title:"Weather in My City",
    readingText:"In my city the weather is different in every season. In winter it is cold and snowy, children play snowballs outside. In spring it is warmer and the days become longer. In summer it is hot and sunny, many people go to the sea or the lake.",
    vocab:"snowy ‚Äì —Å–Ω–µ–∂–Ω—ã–π; longer ‚Äì –¥–ª–∏–Ω–Ω–µ–µ; season ‚Äì —Å–µ–∑–æ–Ω.",
    examples:[
      "Winter is cold and snowy.",
      "In spring the days become longer.",
      "In summer many people go to the sea."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T or F.",
        questions:[
          {
            text:"In winter it is hot and sunny.",
            options:["True","False"],
            correct:1
          },
          {
            text:"In summer many people go to the sea or lake.",
            options:["True","False"],
            correct:0
          },
          {
            text:"Spring is warmer than winter.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer the questions.",
        questions:[
          {
            text:"What do children do in winter?",
            options:["Swim in the river.","Play snowballs.","Plant flowers."],
            correct:1
          },
          {
            text:"What happens to days in spring?",
            options:["They become shorter.","They become longer.","They disappear."],
            correct:1
          },
          {
            text:"What is the summer weather like?",
            options:["Cold and rainy.","Hot and sunny.","Always windy."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the best meaning.",
        questions:[
          {
            text:"If the day is 'snowy', there is‚Ä¶",
            options:["snow","sand","fog"],
            correct:0
          },
          {
            text:"A 'season' is‚Ä¶",
            options:["a kind of food","a part of the year","a pet"],
            correct:1
          },
          {
            text:"If days become 'longer', they‚Ä¶",
            options:["have more daylight.","have no light.","are always dark."],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "weather in different seasons in one city.",
              "only one hot summer.",
              "a storm at sea."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:9,
    name:"Home",
    level:"Beginner",
    title:"My Home",
    readingText:"I live in a small flat on the fifth floor. There are three rooms: a living room, a bedroom and a kitchen. I share the bedroom with my sister. We have two beds, a desk and a big wardrobe. My favourite place is the living room, because we watch films there together.",
    vocab:"share ‚Äì –¥–µ–ª–∏—Ç—å; wardrobe ‚Äì —à–∫–∞—Ñ; together ‚Äì –≤–º–µ—Å—Ç–µ.",
    examples:[
      "I live in a small flat.",
      "I share the bedroom with my sister.",
      "We watch films together in the living room."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"The flat has three rooms.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The writer has a separate bedroom.",
            options:["True","False"],
            correct:1
          },
          {
            text:"They watch films in the living room.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"On which floor is the flat?",
            options:["First.","Fifth.","Tenth."],
            correct:1
          },
          {
            text:"What is in the bedroom?",
            options:[
              "Two beds, a desk and a wardrobe.",
              "Only one chair.",
              "A TV and a fridge."
            ],
            correct:0
          },
          {
            text:"Why is the living room the favourite place?",
            options:[
              "Because it is empty.",
              "Because they watch films there.",
              "Because nobody goes there."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"If you 'share' a room, you‚Ä¶",
            options:[
              "live there alone.",
              "live there with another person.",
              "never go there."
            ],
            correct:1
          },
          {
            text:"A 'wardrobe' is‚Ä¶",
            options:["a bed","a clothes cupboard","a window"],
            correct:1
          },
          {
            text:"'Together' means‚Ä¶",
            options:["not with anyone","with other people","always online"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text describes‚Ä¶",
            options:[
              "a school.",
              "the writer‚Äôs home and rooms.",
              "a shop in the city."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:10,
    name:"Travel",
    level:"Beginner",
    title:"A Trip to the Village",
    readingText:"Last summer I visited my grandparents in the village. I travelled there by bus. The village was quiet and green. Every morning we walked near the river and fed the chickens. In the evening we sat in the garden and looked at the stars. It was a simple but happy holiday.",
    vocab:"quiet ‚Äì —Ç–∏—Ö–∏–π; feed ‚Äì –∫–æ—Ä–º–∏—Ç—å; holiday ‚Äì –∫–∞–Ω–∏–∫—É–ª—ã, –æ—Ç–ø—É—Å–∫.",
    examples:[
      "I travelled to the village by bus.",
      "We walked near the river.",
      "We looked at the stars in the evening."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"The writer visited grandparents in the city centre.",
            options:["True","False"],
            correct:1
          },
          {
            text:"They fed the chickens in the village.",
            options:["True","False"],
            correct:0
          },
          {
            text:"They looked at the stars in the evening.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"How did the writer travel to the village?",
            options:["By car.","By bus.","By train."],
            correct:1
          },
          {
            text:"What was the village like?",
            options:["Quiet and green.","Very noisy.","Full of cars."],
            correct:0
          },
          {
            text:"Where did they walk in the morning?",
            options:["Near the shops.","Near the river.","Near the school."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"If a place is 'quiet', it is‚Ä¶",
            options:["very loud.","not noisy.","full of cars."],
            correct:1
          },
          {
            text:"To 'feed' chickens means‚Ä¶",
            options:["play with them.","give them food.","wash them."],
            correct:1
          },
          {
            text:"A 'holiday' here means‚Ä¶",
            options:["time without school or work.","a test.","a school subject."],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is mostly about‚Ä¶",
            options:[
              "a quiet summer trip to the village.",
              "a busy city weekend.",
              "a long plane journey."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:11,
    name:"Technology",
    level:"Beginner",
    title:"My Mobile Phone",
    readingText:"I use my mobile phone every day. I call my parents, chat with friends and listen to music. I also use the phone to check homework in our school chat. I try not to spend too much time online. After nine o‚Äôclock in the evening I stop using my phone.",
    vocab:"spend time ‚Äì –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤—Ä–µ–º—è; online ‚Äì –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ; check ‚Äì –ø—Ä–æ–≤–µ—Ä—è—Ç—å.",
    examples:[
      "I call parents and friends with my phone.",
      "I check homework in the school chat.",
      "I stop using my phone after nine."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"The writer uses the phone only for games.",
            options:["True","False"],
            correct:1
          },
          {
            text:"He checks homework with his phone.",
            options:["True","False"],
            correct:0
          },
          {
            text:"He stops using his phone after nine in the evening.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer the questions.",
        questions:[
          {
            text:"What does he do with his phone?",
            options:[
              "Calls, chats and listens to music.",
              "Only takes photos.",
              "Only plays games."
            ],
            correct:0
          },
          {
            text:"Where does he check his homework?",
            options:["In the school chat.","On TV.","In a newspaper."],
            correct:0
          },
          {
            text:"What rule does he have?",
            options:[
              "He never uses a phone.",
              "He stops using it after nine.",
              "He uses it all night."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"To 'spend time online' means‚Ä¶",
            options:[
              "sit with no internet.",
              "use the internet for some time.",
              "study only maths."
            ],
            correct:1
          },
          {
            text:"To 'check homework' is‚Ä¶",
            options:[
              "forget homework.",
              "look at homework and see if it is right.",
              "throw homework away."
            ],
            correct:1
          },
          {
            text:"If you are 'online', you are‚Ä¶",
            options:[
              "using the internet.",
              "sleeping.",
              "cooking."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "rules for phone use in one boy‚Äôs life.",
              "a broken computer.",
              "a new TV show."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:12,
    name:"Music",
    level:"Beginner",
    title:"Music in My Room",
    readingText:"I love listening to music in my room. I usually listen to pop songs and sometimes to calm piano music. When I do my homework, I prefer quiet music. At the weekend I watch music videos and sing my favourite songs. Music makes me feel happy and relaxed.",
    vocab:"calm ‚Äì —Å–ø–æ–∫–æ–π–Ω—ã–π; prefer ‚Äì –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å; relaxed ‚Äì —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–π.",
    examples:[
      "I usually listen to pop songs.",
      "I prefer quiet music for homework.",
      "Music makes me feel happy and relaxed."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"The writer hates music.",
            options:["True","False"],
            correct:1
          },
          {
            text:"He sometimes listens to piano music.",
            options:["True","False"],
            correct:0
          },
          {
            text:"At the weekend he watches music videos.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"What kind of music does he usually listen to?",
            options:["Rock only.","Pop songs.","No music."],
            correct:1
          },
          {
            text:"What music does he prefer for homework?",
            options:["Very loud music.","Calm, quiet music.","No music at all."],
            correct:1
          },
          {
            text:"How does music make him feel?",
            options:["Angry.","Sleepy only.","Happy and relaxed."],
            correct:2
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"If you 'prefer' quiet music, you‚Ä¶",
            options:[
              "like it more than other music.",
              "hate it.",
              "never listen to it."
            ],
            correct:0
          },
          {
            text:"If music is 'calm', it is‚Ä¶",
            options:["very noisy and fast.","quiet and soft.","only for dancing."],
            correct:1
          },
          {
            text:"If you feel 'relaxed', you are‚Ä¶",
            options:["nervous.","calm and comfortable.","very hungry."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is mostly about‚Ä¶",
            options:[
              "music in the writer‚Äôs life and how it makes him feel.",
              "a concert in another city.",
              "buying a new guitar."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:13,
    name:"Films",
    level:"Beginner",
    title:"Watching Films",
    readingText:"My family likes watching films together. On Friday evenings we make tea, sit on the sofa and choose a film. I prefer comedies because they are funny. My dad likes action films and my mum enjoys dramas. After the film we talk about our favourite characters and moments.",
    vocab:"comedy ‚Äì –∫–æ–º–µ–¥–∏—è; action film ‚Äì –±–æ–µ–≤–∏–∫; character ‚Äì –ø–µ—Ä—Å–æ–Ω–∞–∂.",
    examples:[
      "We watch films on Friday evenings.",
      "I prefer comedies.",
      "We talk about favourite characters after the film."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"They usually watch films on Friday evenings.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The writer prefers horror films.",
            options:["True","False"],
            correct:1
          },
          {
            text:"The mum enjoys dramas.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"Where do they sit when they watch films?",
            options:["On the floor.","On the sofa.","In the car."],
            correct:1
          },
          {
            text:"What does the dad like?",
            options:["Action films.","Cartoons only.","No films."],
            correct:0
          },
          {
            text:"What do they do after the film?",
            options:[
              "Turn off the TV and sleep.",
              "Talk about characters and moments.",
              "Go to school."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"A 'comedy' is a film that is‚Ä¶",
            options:["funny.","very scary.","boring."],
            correct:0
          },
          {
            text:"An 'action film' usually has‚Ä¶",
            options:["a lot of music only.","many fights and dangerous scenes.","only animals."],
            correct:1
          },
          {
            text:"A 'character' is‚Ä¶",
            options:["a person in the story.","a place in the city.","a type of food."],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "a family tradition of watching films together.",
              "only one cinema ticket.",
              "a school exam."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:14,
    name:"Books",
    level:"Beginner",
    title:"Reading Books",
    readingText:"I enjoy reading books in the evening. I usually read short stories and adventure books. At school I sometimes read in the library during the break. Reading helps me learn new words in English and travel to different places in my imagination.",
    vocab:"adventure ‚Äì –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ; library ‚Äì –±–∏–±–ª–∏–æ—Ç–µ–∫–∞; imagination ‚Äì –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ.",
    examples:[
      "I read in the evening.",
      "I like short stories and adventures.",
      "Reading helps me learn new words."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"The writer enjoys reading books.",
            options:["True","False"],
            correct:0
          },
          {
            text:"He never reads at school.",
            options:["True","False"],
            correct:1
          },
          {
            text:"Reading helps him learn new English words.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"What kind of books does he like?",
            options:["Only poems.","Short stories and adventure books.","Only cookbooks."],
            correct:1
          },
          {
            text:"Where does he sometimes read at school?",
            options:["In the library.","In the canteen.","In the gym."],
            correct:0
          },
          {
            text:"What does reading help him do?",
            options:[
              "Forget all words.",
              "Learn new English words.",
              "Sleep in class."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"An 'adventure' story is usually‚Ä¶",
            options:["very boring.","full of exciting events.","about only food."],
            correct:1
          },
          {
            text:"A 'library' is a place where you‚Ä¶",
            options:["buy clothes.","borrow and read books.","play football."],
            correct:1
          },
          {
            text:"'Imagination' is your ability to‚Ä¶",
            options:[
              "count money.",
              "think of pictures and stories in your head.",
              "run very fast."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "why the writer likes reading books.",
              "how to cook dinner.",
              "rules in the library."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:15,
    name:"Shopping",
    level:"Beginner",
    title:"Shopping with Mum",
    readingText:"Every Saturday I go shopping with my mum. We usually visit the supermarket near our house. We buy bread, milk, fruit and vegetables. Sometimes my mum lets me choose a small chocolate bar. I help her carry the bags home. I like spending this time with her.",
    vocab:"supermarket ‚Äì —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç; carry ‚Äì –Ω–æ—Å–∏—Ç—å; bar ‚Äì –ø–ª–∏—Ç–∫–∞.",
    examples:[
      "We go shopping on Saturdays.",
      "We buy food in the supermarket.",
      "I help carry the bags home."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"They go shopping every Sunday.",
            options:["True","False"],
            correct:1
          },
          {
            text:"They buy bread, milk, fruit and vegetables.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The writer never helps with bags.",
            options:["True","False"],
            correct:1
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"Where do they usually shop?",
            options:["In a small school.","In the supermarket near their house.","Only online."],
            correct:1
          },
          {
            text:"What sweet thing does the writer sometimes get?",
            options:["A big cake.","A small chocolate bar.","Ice cream."],
            correct:1
          },
          {
            text:"Why does the writer like this time?",
            options:[
              "Because of homework.",
              "Because he spends time with his mum.",
              "Because he can sleep there."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"A 'supermarket' is‚Ä¶",
            options:[
              "a big food shop.",
              "a school building.",
              "a stadium."
            ],
            correct:0
          },
          {
            text:"To 'carry' bags means‚Ä¶",
            options:[
              "leave them on the floor.",
              "take them in your hands and move them.",
              "throw them away."
            ],
            correct:1
          },
          {
            text:"A chocolate 'bar' is‚Ä¶",
            options:[
              "a drink.",
              "a small piece of chocolate.",
              "a type of fruit."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is mostly about‚Ä¶",
            options:[
              "shopping with mum on Saturdays.",
              "shopping on the internet.",
              "rules in a supermarket."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:16,
    name:"Health",
    level:"Beginner",
    title:"Healthy Habits",
    readingText:"I try to have healthy habits. I drink a lot of water and eat fruit every day. I go to bed before ten o‚Äôclock on school days. Twice a week I go for a run in the park. These things help me feel strong and not get ill so often.",
    vocab:"habit ‚Äì –ø—Ä–∏–≤—ã—á–∫–∞; twice a week ‚Äì –¥–≤–∞–∂–¥—ã –≤ –Ω–µ–¥–µ–ª—é; ill ‚Äì –±–æ–ª—å–Ω–æ–π.",
    examples:[
      "I drink a lot of water.",
      "I go to bed before ten.",
      "I run in the park twice a week."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"The writer eats fruit every day.",
            options:["True","False"],
            correct:0
          },
          {
            text:"He goes to bed very late on school days.",
            options:["True","False"],
            correct:1
          },
          {
            text:"He runs in the park twice a week.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"What does he drink a lot of?",
            options:["Juice.","Water.","Cola."],
            correct:1
          },
          {
            text:"When does he usually go to bed on school days?",
            options:["Before ten o‚Äôclock.","After midnight.","At three in the morning."],
            correct:0
          },
          {
            text:"Why do these habits help him?",
            options:[
              "They help him feel strong and not get ill.",
              "They make him tired.",
              "They give him more homework."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"A 'habit' is‚Ä¶",
            options:[
              "something you do regularly.",
              "a one-time event.",
              "a school subject."
            ],
            correct:0
          },
          {
            text:"'Twice a week' means‚Ä¶",
            options:["one time a week.","two times a week.","five times a week."],
            correct:1
          },
          {
            text:"If you are 'ill', you are‚Ä¶",
            options:["healthy.","hungry.","sick."],
            correct:2
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "unhealthy food.",
              "simple healthy habits in one boy‚Äôs life.",
              "sports competitions."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:17,
    name:"Environment",
    level:"Beginner",
    title:"Taking Care of the Environment",
    readingText:"I want to protect nature. At home we sort our rubbish and put paper, plastic and glass in different bags. I never throw litter on the street. Sometimes my friends and I help clean the school yard in spring. I think small actions can help our planet.",
    vocab:"protect ‚Äì –∑–∞—â–∏—â–∞—Ç—å; litter ‚Äì –º—É—Å–æ—Ä; yard ‚Äì –¥–≤–æ—Ä.",
    examples:[
      "We sort our rubbish at home.",
      "I never throw litter on the street.",
      "Small actions can help our planet."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"They sort rubbish at home.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The writer often throws litter on the street.",
            options:["True","False"],
            correct:1
          },
          {
            text:"Friends help clean the school yard.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"What does the family do with rubbish?",
            options:[
              "Puts everything together.",
              "Sorts paper, plastic and glass.",
              "Throws it in the river."
            ],
            correct:1
          },
          {
            text:"Where do they help clean?",
            options:["The cinema.","The school yard.","The shop."],
            correct:1
          },
          {
            text:"What does the writer think?",
            options:[
              "Small actions can help the planet.",
              "Nothing can help the planet.",
              "Only big factories matter."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"To 'protect' nature means‚Ä¶",
            options:[
              "hurt it.",
              "keep it safe.",
              "ignore it."
            ],
            correct:1
          },
          {
            text:"'Litter' is‚Ä¶",
            options:["school books.","rubbish on the ground.","clean water."],
            correct:1
          },
          {
            text:"A 'yard' is‚Ä¶",
            options:["a room inside.","an area near a building.","a mountain."],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "saving money.",
              "small ways to help the environment.",
              "a science lesson."
            ],
            correct:1
          }
        ]
      }
    ]
  },
  {
    id:18,
    name:"Science",
    level:"Beginner",
    title:"Science in Everyday Life",
    readingText:"Science is not only in big laboratories. We see it in everyday life. When we use a smartphone, ride a bus or switch on the light, we use results of science. At school I like science lessons, because we do simple experiments and learn how things work.",
    vocab:"laboratory ‚Äì –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è; experiment ‚Äì —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç; result ‚Äì —Ä–µ–∑—É–ª—å—Ç–∞—Ç.",
    examples:[
      "Science is in everyday life.",
      "Using a smartphone is a result of science.",
      "We do simple experiments at school."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"Science is only in laboratories.",
            options:["True","False"],
            correct:1
          },
          {
            text:"A smartphone is a result of science.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The writer likes science lessons.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"Where do we see science?",
            options:[
              "Only at university.",
              "In many everyday things.",
              "Only in books."
            ],
            correct:1
          },
          {
            text:"What do they do in science lessons?",
            options:[
              "Only write tests.",
              "Simple experiments.",
              "Sing songs all lesson."
            ],
            correct:1
          },
          {
            text:"Which action is a result of science?",
            options:[
              "Switching on the light.",
              "Sleeping at home.",
              "Eating breakfast."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"A 'laboratory' is‚Ä¶",
            options:[
              "a place where scientists work.",
              "a kind of food.",
              "a toy shop."
            ],
            correct:0
          },
          {
            text:"An 'experiment' is‚Ä¶",
            options:[
              "a test in maths.",
              "a special activity to learn something.",
              "a holiday trip."
            ],
            correct:1
          },
          {
            text:"A 'result' is‚Ä¶",
            options:[
              "the end or effect of something.",
              "the beginning of a story.",
              "a famous singer."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "science in everyday life and at school.",
              "only about animals.",
              "only about history."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:19,
    name:"Art",
    level:"Beginner",
    title:"Art Around Us",
    readingText:"Art is everywhere. We see it in paintings, music, films and even in beautiful buildings. I like going to art galleries and looking at pictures. At school I enjoy art lessons, because we draw and paint. I am not a great artist, but art helps me show my feelings.",
    vocab:"gallery ‚Äì –≥–∞–ª–µ—Ä–µ—è; artist ‚Äì —Ö—É–¥–æ–∂–Ω–∏–∫; feeling ‚Äì —á—É–≤—Å—Ç–≤–æ.",
    examples:[
      "Art is in many things.",
      "I like going to art galleries.",
      "Art helps me show my feelings."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Choose T/F.",
        questions:[
          {
            text:"Art is only in museums.",
            options:["True","False"],
            correct:1
          },
          {
            text:"The writer enjoys art lessons at school.",
            options:["True","False"],
            correct:0
          },
          {
            text:"Art helps the writer show feelings.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"Where does the writer like to go?",
            options:["To art galleries.","To football stadiums only.","To the airport."],
            correct:0
          },
          {
            text:"What do they do in art lessons?",
            options:[
              "Only read texts.",
              "Draw and paint.",
              "Run in the yard."
            ],
            correct:1
          },
          {
            text:"Which is NOT an example of art here?",
            options:["Paintings.","Music.","Maths test."],
            correct:2
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"A 'gallery' is‚Ä¶",
            options:[
              "a place to show art.",
              "a big shop.",
              "a school cafeteria."
            ],
            correct:0
          },
          {
            text:"An 'artist' is‚Ä¶",
            options:[
              "a person who creates art.",
              "a sports trainer.",
              "a doctor."
            ],
            correct:0
          },
          {
            text:"'Feeling' is‚Ä¶",
            options:[
              "a kind of building.",
              "what you feel inside, like happy or sad.",
              "a food product."
            ],
            correct:1
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "how art is around us and in the writer‚Äôs life.",
              "only about one museum.",
              "a science project."
            ],
            correct:0
          }
        ]
      }
    ]
  },
  {
    id:20,
    name:"Social Media",
    level:"Beginner",
    title:"Social Media and Friends",
    readingText:"Many of my friends use social media every day. We send messages, funny pictures and short videos to each other. I like chatting online, but I know it is important to talk face to face too. My parents ask me to turn off the phone during meals and before sleep.",
    vocab:"social media ‚Äì —Å–æ—Ü—Å–µ—Ç–∏; face to face ‚Äì –ª–∏—á–Ω–æ; meal ‚Äì –ø—Ä–∏—ë–º –ø–∏—â–∏.",
    examples:[
      "We send messages and pictures to each other.",
      "It is important to talk face to face.",
      "I turn off the phone during meals."
    ],
    exercises:[
      {
        title:"Ex 1. True or False",
        desc:"Mark T/F.",
        questions:[
          {
            text:"Many friends use social media every day.",
            options:["True","False"],
            correct:0
          },
          {
            text:"The writer never chats online.",
            options:["True","False"],
            correct:1
          },
          {
            text:"Parents want the phone to be off during meals.",
            options:["True","False"],
            correct:0
          }
        ]
      },
      {
        title:"Ex 2. Multiple choice",
        desc:"Answer.",
        questions:[
          {
            text:"What do they send to each other?",
            options:[
              "Books and pens.",
              "Messages, pictures and videos.",
              "Only homework."
            ],
            correct:1
          },
          {
            text:"What does the writer think is important?",
            options:[
              "Only chatting online.",
              "Talking face to face too.",
              "Never talking to people."
            ],
            correct:1
          },
          {
            text:"When do parents ask to turn off the phone?",
            options:[
              "During meals and before sleep.",
              "At school only.",
              "Never."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 3. Vocabulary",
        desc:"Choose the meaning.",
        questions:[
          {
            text:"'Social media' are‚Ä¶",
            options:[
              "online platforms for communication.",
              "school subjects.",
              "sports clubs."
            ],
            correct:0
          },
          {
            text:"If you talk 'face to face', you‚Ä¶",
            options:[
              "talk by phone only.",
              "talk with the person in the same place.",
              "never talk at all."
            ],
            correct:1
          },
          {
            text:"A 'meal' is‚Ä¶",
            options:[
              "time when you eat.",
              "a test in class.",
              "a sport game."
            ],
            correct:0
          }
        ]
      },
      {
        title:"Ex 4. Main idea",
        desc:"Choose.",
        questions:[
          {
            text:"The text is about‚Ä¶",
            options:[
              "using social media and real communication.",
              "only about school exams.",
              "building a house."
            ],
            correct:0
          }
        ]
      }
    ]
  }
];

/* ---------- STATE & STORAGE ---------- */

let currentUser = null; // {name, code, classLabel, stars, lastLogin}
let currentTopicId = null;

function todayStr(){
  return new Date().toISOString().slice(0,10);
}
function studentKey(code){
  return "bayan_reading_student_"+code;
}

function loadStudent(code,name,classLabel){
  const key = studentKey(code);
  let data = null;
  try{
    data = JSON.parse(localStorage.getItem(key));
  }catch(e){
    data=null;
  }
  if(!data){
    data = {
      name:name||"",
      code,
      classLabel,
      stars:0,
      lastLogin:null
    };
  }else{
    if(name) data.name = name;
    data.classLabel = classLabel;
  }
  data.lastLogin = todayStr();
  localStorage.setItem(key,JSON.stringify(data));
  return data;
}
function saveCurrent(){
  if(!currentUser) return;
  const key = studentKey(currentUser.code);
  localStorage.setItem(key,JSON.stringify(currentUser));
}

/* ---------- SCREEN SWITCHING ---------- */

function showOnly(id){
  document.getElementById("loginScreen").classList.add("hidden");
  document.getElementById("mainMenuScreen").classList.add("hidden");
  document.getElementById("topicScreen").classList.add("hidden");
  document.getElementById("teacherScreen").classList.add("hidden");
  document.getElementById(id).classList.remove("hidden");
}
function setTopInfo(html){
  document.getElementById("topInfo").innerHTML = html;
}

/* ---------- LOGIN ---------- */

function handleLogin(){
  const name = document.getElementById("loginName").value.trim();
  const codeStr = document.getElementById("loginCode").value.trim();
  const errorEl = document.getElementById("loginError");
  errorEl.classList.add("hidden");
  errorEl.textContent = "";

  if(!codeStr){
    errorEl.textContent = "Enter your code.";
    errorEl.classList.remove("hidden");
    return;
  }

  // TEACHER
  if(codeStr==="3244"){
    setTopInfo(`Logged in as <strong>TEACHER</strong> ¬∑ code 3244`);
    renderTeacherTable();
    showOnly("teacherScreen");
    return;
  }

  const num = Number(codeStr);
  if(!Number.isInteger(num)){
    errorEl.textContent = "Code must be a number.";
    errorEl.classList.remove("hidden");
    return;
  }
  const classLabel = getClassByCode(num);
  if(!classLabel){
    errorEl.textContent = "Unknown student code. Ask your teacher.";
    errorEl.classList.remove("hidden");
    return;
  }
  if(!name){
    errorEl.textContent = "Enter your name.";
    errorEl.classList.remove("hidden");
    return;
  }

  currentUser = loadStudent(num,name,classLabel);
  saveCurrent();
  setTopInfo(
    `Class <strong>${currentUser.classLabel}</strong> ¬∑ Student: <strong>${currentUser.name}</strong> (code ${currentUser.code}) ¬∑ Stars: <strong id="topStars">${currentUser.stars}</strong>`
  );
  buildMainMenu();
  showOnly("mainMenuScreen");
}

function backToLogin(){
  currentUser = null;
  setTopInfo("Not logged in");
  document.getElementById("loginCode").value = "";
  document.getElementById("loginName").value = "";
  showOnly("loginScreen");
}

/* ---------- MAIN MENU UI ---------- */

function buildMainMenu(){
  if(!currentUser) return;
  document.getElementById("menuInfo").innerHTML =
    `Class <strong>${currentUser.classLabel}</strong>, student <strong>${currentUser.name}</strong> (code ${currentUser.code})`;
  document.getElementById("menuStars").textContent = currentUser.stars ?? 0;

  const grid = document.getElementById("menuTopics");
  grid.innerHTML = "";
  topics.forEach(t=>{
    const div = document.createElement("div");
    div.className = "topic-card";
    const color = topicColors[t.id] || "#a5621c";
    div.style.borderColor = color+"55";
    div.innerHTML = `
      <div class="topic-card-title">${t.id}. ${t.title}</div>
      <div class="topic-card-sub">${t.level}</div>
    `;
    div.addEventListener("click",()=>openTopic(t.id));
    grid.appendChild(div);
  });
  updateTopStars();
}

/* ---------- TOPIC SCREEN ---------- */

function openTopic(id){
  currentTopicId = id;
  const t = topics.find(x=>x.id===id);
  if(!t) return;

  const color = topicColors[id] || "#6d3b0f";
  document.documentElement.style.setProperty("--topicColor",color);

  document.getElementById("topicHeaderTitle").textContent = `${id}. ${t.title}`;
  document.getElementById("topicHeaderTag").innerHTML =
    `<span class="tag">${t.level}</span>`;

  // READING BOX
  const rc = document.getElementById("topicRuleContainer");
  rc.innerHTML = "";
  const box = document.createElement("div");
  box.className = "reading-box";
  box.innerHTML = `
    <strong>Reading text:</strong>
    <p>${t.readingText}</p>
    ${t.vocab ? `<div class="reading-vocab"><strong>Words:</strong> ${t.vocab}</div>` : ""}
  `;
  rc.appendChild(box);

  if(t.examples && t.examples.length){
    const ul = document.createElement("ul");
    ul.className = "examples";
    t.examples.forEach(e=>{
      const li = document.createElement("li");
      li.textContent = e;
      ul.appendChild(li);
    });
    rc.appendChild(ul);
  }

  // EXERCISES (MCQ / T-F –∏–º–∏—Ç–∏—Ä—É–µ—Ç—Å—è)
  const ec = document.getElementById("topicExercisesContainer");
  ec.innerHTML = "";
  if(!t.exercises || t.exercises.length===0){
    const p = document.createElement("p");
    p.className = "muted";
    p.style.marginTop = "10px";
    p.textContent = "Exercises for this topic will be added later.";
    ec.appendChild(p);
  }else{
    const wrapper = document.createElement("div");
    wrapper.className = "exercises";
    t.exercises.forEach((ex,exIndex)=>{
      const block = document.createElement("div");
      block.className = "exercise-block";

      const title = document.createElement("div");
      title.className = "exercise-title";
      title.textContent = ex.title;
      block.appendChild(title);

      const desc = document.createElement("div");
      desc.className = "exercise-desc";
      desc.textContent = ex.desc || "";
      block.appendChild(desc);

      ex.questions.forEach((q,qIndex)=>{
        const row = document.createElement("div");
        row.className = "question-row";

        const qText = document.createElement("div");
        qText.className = "question-text";
        qText.textContent = `${qIndex+1}) ${q.text}`;
        row.appendChild(qText);

        const opts = document.createElement("div");
        opts.className = "options";
        q.options.forEach((opt,optIndex)=>{
          const label = document.createElement("label");
          const radio = document.createElement("input");
          radio.type = "radio";
          const gname = `t${id}_e${exIndex}_q${qIndex}`;
          radio.name = gname;
          radio.value = optIndex;
          label.appendChild(radio);
          label.appendChild(document.createTextNode(" "+opt));
          opts.appendChild(label);
        });
        row.appendChild(opts);

        const mark = document.createElement("span");
        mark.className = "mark";
        mark.id = `mark_t${id}_e${exIndex}_q${qIndex}`;
        row.appendChild(mark);

        block.appendChild(row);
      });

      const footer = document.createElement("div");
      footer.className = "exercise-footer";
      const small = document.createElement("small");
      small.textContent = "Each correct answer gives you 1 star. One attempt for this exercise.";
      const btn = document.createElement("button");
      btn.className = "btn btn-primary";
      btn.textContent = "Check";
      btn.addEventListener("click",()=>checkExercise(id,exIndex));
      footer.appendChild(small);
      footer.appendChild(btn);
      block.appendChild(footer);

      wrapper.appendChild(block);
    });
    ec.appendChild(wrapper);
  }

  document.getElementById("topicStatus").textContent = "";
  showOnly("topicScreen");
}

function backToMenu(){
  if(!currentUser){
    backToLogin();
    return;
  }
  buildMainMenu();
  showOnly("mainMenuScreen");
}

function printCurrentTopic(){
  if(!currentTopicId) return;
  window.print();
}

/* ---------- CHECK EXERCISES (1 –ø–æ–ø—ã—Ç–∫–∞) ---------- */

function checkExercise(topicId, exIndex){
  if(!currentUser) return;

  const t = topics.find(x=>x.id===topicId);
  if(!t) return;
  const ex = t.exercises[exIndex];
  if(!ex) return;

  const key = `done_reading_t${topicId}_e${exIndex}_code${currentUser.code}`;
  if(localStorage.getItem(key) === "1"){
    const statusAlready = document.getElementById("topicStatus");
    if(statusAlready){
      statusAlready.textContent = "You have already completed this exercise.";
    }
    disableExercise(topicId, exIndex);
    return;
  }

  let gained = 0;
  ex.questions.forEach((q,qIndex)=>{
    const gname = `t${topicId}_e${exIndex}_q${qIndex}`;
    const selected = document.querySelector(`input[name="${gname}"]:checked`);
    const markEl = document.getElementById(`mark_t${topicId}_e${exIndex}_q${qIndex}`);
    if(!markEl) return;
    markEl.textContent = "";
    markEl.classList.remove("correct","wrong");

    if(!selected){
      markEl.textContent = "‚Ä¢";
      return;
    }
    const chosen = Number(selected.value);
    if(chosen === q.correct){
      markEl.textContent = "‚úì";
      markEl.classList.add("correct");
      gained++;
    }else{
      markEl.textContent = "‚úó";
      markEl.classList.add("wrong");
    }
  });

  localStorage.setItem(key,"1");

  const status = document.getElementById("topicStatus");
  if(gained>0){
    currentUser.stars += gained;
    saveCurrent();
    updateTopStars();
    if(status){
      status.textContent = `Exercise completed. You gained ${gained} star(s).`;
    }
  }else{
    if(status){
      status.textContent = "Exercise completed. No correct answers.";
    }
  }

  disableExercise(topicId, exIndex);
}

function disableExercise(topicId, exIndex){
  const t = topics.find(x=>x.id===topicId);
  if(!t) return;
  const ex = t.exercises[exIndex];
  if(!ex) return;

  ex.questions.forEach((q,qIndex)=>{
    const gname = `t${topicId}_e${exIndex}_q${qIndex}`;
    const inputs = document.querySelectorAll(`input[name="${gname}"]`);
    inputs.forEach(inp => inp.disabled = true);
  });

  const blocks = document.querySelectorAll("#topicExercisesContainer .exercise-block");
  const block = blocks[exIndex];
  if(block){
    const btn = block.querySelector("button");
    if(btn){
      btn.disabled = true;
      btn.style.opacity = "0.6";
      btn.style.cursor = "not-allowed";
    }
  }
}

/* ---------- TEACHER TABLE ---------- */

function renderTeacherTable(){
  const tbody = document.querySelector("#teacherTable tbody");
  tbody.innerHTML = "";
  const allStudents = [];
  classRanges.forEach(r=>{
    for(let code=r.from; code<=r.to; code++){
      const key = studentKey(code);
      let data = null;
      try{
        data = JSON.parse(localStorage.getItem(key));
      }catch(e){ data=null; }
      if(data) allStudents.push(data);
    }
  });
  if(allStudents.length===0){
    const tr = document.createElement("tr");
    const td = document.createElement("td");
    td.colSpan = 5;
    td.textContent =
      "No student data in this browser yet. Ask students to log in and work with tasks.";
    tr.appendChild(td);
    tbody.appendChild(tr);
    return;
  }
  allStudents.sort((a,b)=>a.code-b.code);
  allStudents.forEach(s=>{
    const tr = document.createElement("tr");
    const cls = document.createElement("td");
    cls.textContent = s.classLabel || getClassByCode(s.code) || "";
    const codeTd = document.createElement("td");
    codeTd.textContent = s.code;
    const nameTd = document.createElement("td");
    nameTd.textContent = s.name || "";
    const starsTd = document.createElement("td");
    starsTd.textContent = s.stars ?? 0;
    const loginTd = document.createElement("td");
    loginTd.textContent = s.lastLogin || "";
    tr.appendChild(cls);
    tr.appendChild(codeTd);
    tr.appendChild(nameTd);
    tr.appendChild(starsTd);
    tr.appendChild(loginTd);
    tbody.appendChild(tr);
  });
}

/* ---------- UPDATE STARS IN HEADER & MENU ---------- */
function updateTopStars(){
  if(!currentUser) return;
  const topStarsEl = document.getElementById("topStars");
  if(topStarsEl){
    topStarsEl.textContent = currentUser.stars ?? 0;
  }
  const menuStarsEl = document.getElementById("menuStars");
  if(menuStarsEl){
    menuStarsEl.textContent = currentUser.stars ?? 0;
  }
}

/* ---------- INIT ---------- */
showOnly("loginScreen");
</script>
</body>
</html>
